<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Responsive Admin Dashboard Template">
  <meta name="keywords" content="admin,dashboard">
  <meta name="author" content="stacks">
  <!-- The above 6 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <!-- Title -->
  <title>Amazon Credentials</title>

  <!-- Styles -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,500,700,800&display=swap" rel="stylesheet">
  <link href="public/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="public/plugins/font-awesome/css/all.min.css" rel="stylesheet">
  <link href="public/plugins/perfectscroll/perfect-scrollbar.css" rel="stylesheet">
  <link href="public/plugins/apexcharts/apexcharts.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>


  <!-- Theme Styles -->
  <link href="public/css/main.min.css" rel="stylesheet">
  <link href="public/css/custom.css" rel="stylesheet">
  <style>
    .fa-large {
      font-size: 30px;
      padding: 10px;
    }

    .color-green {
      color: #6bcac2;
    }

    .color-red {
      color: #dc3545;
    }

    .active-page1 {
      border-radius: 10px;
      background-color: #f3f6f9;
      color: #7888fc;
      font-weight: 500;
    }
  </style>
  <script>
    document.getElementById('output').innerHTML = location.search;
    $(".chosen-select").chosen();
  </script>
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>

<body>

  <!-- <div class='loader'>
        <div class='spinner-grow text-primary' role='status'>
          <span class='sr-only'>Loading...</span>
        </div>
      </div> -->
  <div class="page-container">
    <div class="page-header">
      <nav class="navbar navbar-expand-lg d-flex justify-content-between">
        <div class="" id="navbarNav">
          <ul class="navbar-nav" id="leftNav">
            <li class="nav-item">
              <a class="nav-link" id="sidebar-toggle" href="#"><i data-feather="menu"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"></a>
            </li>

          </ul>
        </div>
        <div class="logo1">
          <h3 class="card-title mb-0"> <img src="public/images/amazon.png" width="50"></img>
            <%= locals.username %>, Amazon Credentials
          </h3>
        </div>
        <div class="" id="headerNav">

        </div>
      </nav>
    </div>
    <div class="page-sidebar">
      <ul class="list-unstyled accordion-menu">
        <li class="sidebar-title">
          Main
        </li>
        <li>
          <a href="/index"><i data-feather="home"></i>Dashboard</a>
        </li>
        <li class="sidebar-title">
          Apps
        </li>
        <% if (locals.shopify==true) { %>
          <li>
            <a href="/shopify"><i data-feather="chevron-right"></i>Shopify</a>
          </li>
          <% } %>
            <% if (locals.ebay==true) { %>
              <li>
                <a href="/ebay"><i data-feather="chevron-right"></i>Ebay</a>
              </li>
              <% } %>
                <% if (locals.amaz==true) { %>
                  <li>
                    <a href="/amazon"><i data-feather="chevron-right"></i>Amazon</a>
                  </li>
                  <% } %>
                    <% if (locals.majento==true) { %>
                      <li>
                        <a href="/majento"><i data-feather="chevron-right"></i>Majento</a>
                      </li>
                      <% } %>
                        <% if (locals.wooCommerce==true) { %>
                          <li>
                            <a href="/woocommerce"><i data-feather="chevron-right"></i>Woo Commerce</a>
                          </li>
                          <% } %>
                            <% if (locals.bigCommerce==true) { %>
                              <li>
                                <a href="/bigcommerce"><i data-feather="chevron-right"></i>Big Commerce</a>
                              </li>
                              <% } %>
                                <% if (locals.etsy==true) { %>
                                  <li>
                                    <a href="/etsy"><i data-feather="chevron-right"></i>ETSY</a>
                                  </li>
                                  <% } %>
                                    <% if (locals.quickBooks==true) { %>
                                      <li>
                                        <a href="/quickbooks"><i data-feather="chevron-right"></i>Quick Books</a>
                                      </li>
                                      <% } %>
                                        <li class="sidebar-title">
                                          Other Services
                                        </li>
                                        <li>
                                          <a href="#"><i data-feather="settings"></i>Services<i
                                              class="fas fa-chevron-right dropdown-icon"></i></a>
                                          <ul class="">
                                            <li><a href="/updateAqxolt"><i class="far fa-circle"></i>Update Aqxolt
                                                Info</a></li>
                                            <% if (locals.manage==true) { %>
                                              <li class="active-page"><a href="/manage"><i
                                                    class="far fa-circle"></i>Manage
                                                  Users</a></li>
                                              <li><a href="typography.html"><i class="far fa-circle"></i>Background
                                                  Jobs</a></li>
                                              <% } %>
                                          </ul>
                                        </li>

                                        <li class="sidebar-title">
                                          Manage Account
                                        </li>
                                        <li>
                                          <a href="#"><i data-feather="user"></i>Profile<i
                                              class="fas fa-chevron-right dropdown-icon"></i></a>
                                          <ul class="">
                                            <li class="active-page"><a href="/manage-edit"><i
                                                  class="far fa-circle"></i>Manage</a>
                                            </li>
                                            <li><a href="/logout"><i class="far fa-circle"></i>logout</a></li>

                                          </ul>
                                        </li>

      </ul>
    </div>
    <div class="page-content">
      <div class="main-wrapper">
        <div class="row">
          <div class="col">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Edit User</h5>

                <% if (success_msg.length> 0) { %>
                  <div class="alert alert-success alert-dismissible fade show"
                    style="position: absolute; width: 70%; top: 20px; left: 12%;" role="alert">
                    <%= locals.success_msg %>
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                  <% } %>

                    <% if (error_msg.length> 0) { %>
                      <div class="alert alert-warning alert-dismissible fade show"
                        style="position: absolute; width: 70%; top: 20px; left: 12%;" role="alert">
                        <%= locals.error_msg %>
                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                      </div>

                      <% } %>

                        <form method="post" action="/amazon-credentials">
                          <div class="mb-3">
                            <input type="hidden" id="edit-form-id" name="Id" />
                            <label for="edit-form-marketplaceId" class="form-label">Market Place ID</label>
                            <input type="text" class="form-control" id="edit-form-marketplaceId" name="marketplace_id"
                              aria-describedby="emailHelp">

                          </div>
                          <div class="mb-3">
                            <label for="edit-form-refreshToken" class="form-label">Refresh Token</label>
                            <input type="text" class="form-control" id="edit-form-refreshToken" name="refresh_token"
                              aria-describedby="emailHelp">
                          </div>
                          <div class="mb-3">
                            <label for="edit-form-amazonAppClientId" class="form-label">Amazon App Client ID</label>
                            <input type="text" class="form-control" id="edit-form-amazonAppClientId"
                              name="amazonAppClient_id" aria-describedby="emailHelp">
                          </div>

                          <div class="mb-3">
                            <label for="edit-form-amazonAppClientSecret" class="form-label">Amazon App Client
                              Secret</label>
                            <input type="text" class="form-control" id="edit-form-amazonAppClientSecret"
                              name="amazonAppClientSecret" aria-describedby="emailHelp">
                          </div>
                          <div class="mb-3">
                            <label for="edit-form-awsSecretAccessKey" class="form-label">Amazon Secret Access
                              Key</label>
                            <input type="text" class="form-control" id="edit-form-awsSecretAccessKey"
                              name="amazonSecretAccessKey" aria-describedby="emailHelp">
                          </div>
                          <div class="mb-3">
                            <label for="edit-form-awsAccessKey" class="form-label">AWS Access Key</label>
                            <input type="text" class="form-control" id="edit-form-awsAccessKey" name="awsAccessKey"
                              aria-describedby="emailHelp">
                          </div>
                          <div class="mb-3">
                            <label for="edit-form-awsSellingPartnerRole" class="form-label">AWS Selling Partner
                              Role</label>
                            <input type="text" class="form-control" id="edit-form-awsSellingPartnerRole"
                              name="awsSellingPartnerRole" aria-describedby="emailHelp">
                          </div>
                          <button type="submit" class="btn btn-primary">Save</button>
                        </form>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Saved Shops</h5>
                <table class="table table-condensed display tableId" style="width:100%">
                  <tbody>
                    <% for(var i=0; i < locals.amazDetails.rows.length; i++) { %>
                      <tr class="row-row">
                        <td>
                          <i class="fas fa-pen color-green editModule" name="<% locals.amazDetails.rows[i].id %>"
                            data-id="<%= locals.amazDetails.rows[i].id %>"
                            data-marketplaceId="<%= locals.amazDetails.rows[i].marketplace_id %>"
                            data-refreshToken="<%= locals.amazDetails.rows[i].refresh_token %>"
                            data-amazonAppClientId="<%= locals.amazDetails.rows[i].amazon_app_client_id %>"
                            data-amazonAppClientSecret="<%= locals.amazDetails.rows[i].amazon_app_client_secret %>"
                            data-awsSecretAccessKey="<%= locals.amazDetails.rows[i].aws_secret_access_key %>"
                            data-awsAccessKey="<%= locals.amazDetails.rows[i].aws_access_key %>"
                            data-awsSellingPartnerRole="<%= locals.amazDetails.rows[i].aws_selling_partner_role %>">
                          </i>
                        </td>
                        <td>
                          <i class="fas fa-trash color-red delete-seller"
                                        data-id="<%= locals.amazDetails.rows[i].amazon_app_client_id %>"></i>
                        </td>
                        <td>
                          <%= locals.amazDetails.rows[i].amazon_app_client_id %>
                        </td>
                      </tr>
                      <% } %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>


      </div>

    </div>
  </div>

  <!-- Javascripts -->
  <script>
    $('.editModule').click(function () {
      $('#edit-form-id').val($(this).attr('data-id'));
      $('#edit-form-marketplaceId').val($(this).attr('data-marketplaceId'));
      $('#edit-form-refreshToken').val($(this).attr('data-refreshToken'));
      $('#edit-form-amazonAppClientId').val($(this).attr('data-amazonAppClientId'));
      $('#edit-form-amazonAppClientSecret').val($(this).attr('data-amazonAppClientSecret'));
      $('#edit-form-awsSecretAccessKey').val($(this).attr('data-awsSecretAccessKey'));
      $('#edit-form-awsAccessKey').val($(this).attr('data-awsAccessKey'));
      $('#edit-form-awsSellingPartnerRole').val($(this).attr('data-awsSellingPartnerRole'));
    });  
    
    $('.delete-seller').on('click', function () {
      var id = $(this).data('id');
      var url = '/deleteSeller/' + id;
      var text = 'Are You Sure. You Want to Delete';
      if (confirm(text)) {
        $.ajax({
          url: url,
          type: 'DELETE',
          success: function (result) {
            console.log('Deleting seller...');
            window.location.href = '/amazon-credentials';
          },
          error: function (err) {
            console.log(err);
          }
        });
      }
    });
    
  </script>
  <script src="public/plugins/jquery/jquery-3.4.1.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="public/plugins/bootstrap/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="public/plugins/perfectscroll/perfect-scrollbar.min.js"></script>
  <script src="public/plugins/apexcharts/apexcharts.min.js"></script>
  <script src="public/js/main.min.js"></script>
  <script src="public/js/pages/dashboard.js"></script>
  <script src="public/plugins/DataTables/datatables.min.js"></script>
  <script src="public/js/pages/datatables.js"></script>
</body>

</html>